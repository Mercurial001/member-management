{% extends 'base.html' %}

{% load static %}

{% block content %}
<section class="member-per-brgy-report-utmost-container-section">
    <div class="member-per-brgy-report-title-header-div">
        Barangay Members
    </div>
    <form method="get" action="{% url 'per-brgy-members' %}">
        <select name="selected-brgy" id="member-per-brgy-brgy-dropdown">
            <option value="">Select a Barangay</option>
            {% for brgy in brgys %}
                <option value="{{ brgy.id }}">{{ brgy.brgy_name }}</option>
            {% endfor %}
        </select>
        <div>
            <button type="submit">Filter</button>
        </div>
    </form>
    <div class="member-per-brgy-table-container-div">
        {% if selected_brgy %}
            <div>
                <a href="{% url 'per-filtered-brgy-members-pdf' %}?selected-brgy={{ selected_brgy }}">Download PDF</a>
            </div>
            {% for brgy, members in member_filtered_per_brgy_list.items %}
                <table class="member-per-brgy-table">
                    <tr class="member-per-brgy-table-row">
                        <th class="member-per-brgy-table-head" colspan="2">{{ brgy }}</th>
                    </tr>
                    <tr class="member-per-brgy-table-row">
                        <th class="member-per-table-head">Name</th>
                        <th class="member-per-table-head">Status</th>
                    </tr>
                    {% for member in members %}
                        <tr class="member-per-brgy-table-row">
                            <td class="member-per-table-data">{{ member.name }}</td>
                            <td class="member-per-table-data">{{ member.group }}</td>
                        </tr>
                    {% endfor %}
                </table>
            {% empty %}
                <div>
                    No Data for Barangay {{ the_brgy }}
                </div>
            {% endfor %}
        {% else %}
            <div>
                <a href="{% url 'per-brgy-members-pdf' %}">Download PDF</a>
            </div>
            {% for brgy, members in member_per_brgy_list.items %}
                <table class="member-per-brgy-table">
                    <tr class="member-per-brgy-table-row">
                        <th class="member-per-brgy-table-head" colspan="2">{{ brgy }}</th>
                    </tr>
                    <tr class="member-per-brgy-table-row">
                        <th class="member-per-table-head">Name</th>
                        <th class="member-per-table-head">Status</th>
                    </tr>
                    {% for member in members %}
                        <tr class="member-per-brgy-table-row">
                            <td class="member-per-table-data">{{ member.name }}</td>
                            <td class="member-per-table-data">{{ member.group }}</td>
                        </tr>
                    {% endfor %}
                </table>
            {% endfor %}
        {% endif %}
    </div>
</section>
{% endblock %}
